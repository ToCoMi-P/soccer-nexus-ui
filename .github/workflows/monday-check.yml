name: Monday Merge Check
on:
  pull_request:
    branches: [master]  # ← Nur dev → master!

jobs:
  monday-check:
    if: github.head_ref == 'develop'  # Nur dev → master PRs!
    runs-on: ubuntu-latest
    steps:
      - name: Check Monday 19+ UTC
        run: |
          # Wenn Branch-Name "hotfix" enthält: immer OK und direkt beenden
          if echo "${GITHUB_HEAD_REF}" | grep -qi "hotfix"; then
            echo "✅ Hotfix-Branch – Monday-Check übersprungen"
            exit 0
          fi

          day=$(date +%u)  # 1 = Montag
          hour=$(date +%H) # UTC Stunde
          if [ $day -eq 1 ] && [ $hour -ge 21 ]; then
            echo "✅ Monday 21+ UTC OK"
            exit 0
          else
            echo "❌ Wait for Monday 21:00 UTC"
            exit 1  # Blockiert Merge!
          fi
